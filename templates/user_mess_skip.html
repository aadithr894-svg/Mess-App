{% extends "base.html" %}
{% block content %}
<div class="container mt-5" style="max-width: 850px;">

  <!-- â”€â”€â”€ Mess Skip Form (unchanged) â”€â”€â”€ -->
  ... your existing skip form ...

  <!-- â”€â”€â”€ Filter Dropdown â”€â”€â”€ -->
  <form method="get" class="mb-4 d-flex justify-content-center">
    <select name="month" class="form-select w-auto me-2">
      <option value="">All Months</option>
      {% for ym in available_months %}
        <option value="{{ ym }}" {% if ym == selected_month %}selected{% endif %}>
          {{ month_name(ym) }}
        </option>
      {% endfor %}
    </select>
    <button type="submit" class="btn btn-primary">Filter</button>
  </form>

  <h4 class="fw-bold text-center mb-4">ğŸ“œ My Skips</h4>

  {% if sorted_months %}
    {% for ym in sorted_months %}
      <div class="mb-4">
        <h5 class="fw-semibold text-primary border-bottom pb-2">
          {{ month_name(ym) }}
        </h5>

        <div class="list-group shadow-sm">
          {% for s in skips_by_month[ym] %}
          <div class="list-group-item d-flex justify-content-between align-items-center flex-wrap">
            <div>
              <strong>{{ s.skip_date_display }}</strong><br>
              <small>
                {% if s.breakfast %}ğŸ³ Breakfast {% endif %}
                {% if s.lunch %}ğŸ› Lunch {% endif %}
                {% if s.dinner %}ğŸ² Dinner {% endif %}
              </small>
            </div>
            <span class="badge bg-info text-dark rounded-pill">Skipped</span>
          </div>
          {% endfor %}
        </div>
      </div>
    {% endfor %}
  {% else %}
    <div class="alert alert-info text-center mt-3">
      ğŸ™Œ No mess skips for this selection.
    </div>
  {% endif %}
</div>
{% endblock %}
